(window.webpackJsonp=window.webpackJsonp||[]).push([["layer-OverpassLayer"],{LQ3Q:function(t,e,o){"use strict";o.r(e);var i=o("o0o1"),s=o.n(i),n=o("yXPU"),a=o.n(n),r=o("y1Ye"),p=o("E6f0"),h=o.n(p);e.default=r.default.FeatureGroup.extend({options:{minZoom:0,endpoint:"//overpass-api.de/api/",query:"(node(BBOX)[organic];node(BBOX)[second_hand];);out qt;",amenityIcons:{}},initialize:function(t){t.pointToLayer||(t.pointToLayer=this.pointToLayer),t.onEachFeature||(t.onEachFeature=this.onEachFeature),r.default.Util.setOptions(this,t),this.options.dynamicLoad=!!this.options.query.match(/BBOX/g),this._layer=r.default.geoJson(),this._layers={},this.addLayer(this._layer)},refreshData:function(){if(!(this._map.getZoom()<this.options.minZoom)){var t,e,o,i=(t=this._map.getBounds(),e=t._southWest,o=t._northEast,[e.lat,e.lng,o.lat,o.lng].join(",")),n=this.options.query.replace(/(BBOX)/g,i),p=this.options.endpoint+"interpreter?data=[out:json];"+n;this._map.fire("dataloading",{layer:this}),fetch(p).then(function(){var t=a()(s.a.mark((function t(e){var o,i,n,a;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.json();case 2:o=t.sent,i=h()(o),n=r.default.geoJson(i,{pointToLayer:this.options.pointToLayer.bind(this),onEachFeature:this.options.onEachFeature.bind(this)}),this.addLayer(n),this.removeLayer(this._layer),this._layer=n,"extend"===this.options.boundsMode&&n.getBounds().isValid()&&(a=(a=this._map.getBounds()).extend(n.getBounds()),this._map.fitBounds(a,this._map.getBoundsOptions())),this._map.fire("dataload",{layer:this});case 10:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}().bind(this))}},onAdd:function(t){t.on("moveend",this.refreshData,this),this.refreshData()},pointToLayer:function(t,e){var o=null,i=r.default.marker(e,t.properties.options);return t.properties&&(t.properties.radius&&i.setRadius(t.properties.radius),t.properties.icon?o=this._map.getIcon(t.properties.icon):t.properties.tags&&t.properties.tags.amenity&&this.options.amenityIcons[t.properties.tags.amenity],o&&i.setIcon(o)),this.options.overpassPopup&&i.bindPopup(this.options.overpassPopup(t,i)),this._map.fire("point:added",{marker:i,feature:t,latlng:e,type:"marker"}),i},onEachFeature:function(t,e){t.properties&&(r.default.Util.setOptions(e,t.properties.options),this.options.overpassPopup&&e.bindPopup(this.options.overpassPopup(t,e)),this._map.fire("feature:added",{feature:t,layer:e}))}})}}]);